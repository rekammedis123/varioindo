<!DOCTYPE html>
<html>
  <head>
    <title>Input ICD 9/10</title>
    <script>
      function submitICD() {
        const code = document.getElementById("icdCode").value;
        const desc = document.getElementById("icdDesc").value;

        google.script.run.withSuccessHandler(updateList).saveICD({ code, desc });

        document.getElementById("icdCode").value = "";
        document.getElementById("icdDesc").value = "";
      }

      function updateList(data) {
        const list = document.getElementById("icdList");
        list.innerHTML = "";
        data.forEach((item, i) => {
          list.innerHTML += `<li>${i + 1}. ${item[0]} - ${item[1]}</li>`;
        });
      }

      function loadICDList() {
        google.script.run.withSuccessHandler(updateList).getICDList();
      }

      window.onload = loadICDList;
    </script>
  </head>
  <body>
    <h2>Form Input ICD 9/10</h2>
    <label>Kode ICD:</label><br />
    <input type="text" id="icdCode" /><br />
    <label>Deskripsi:</label><br />
    <input type="text" id="icdDesc" /><br /><br />
    <button onclick="submitICD()">Submit</button>

    <h3>Daftar ICD:</h3>
    <ul id="icdList"></ul>
  </body>
</html>
